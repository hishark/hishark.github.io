<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="777 ">
<meta name="description" content="SSM真的很好用啊鼓掌！👏
" />
<meta name="keywords" content=", SSM" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="#252627" />
<link rel="canonical" href="https://hishark777.com/post/ssm%E8%BE%B9%E7%BC%98%E8%AF%95%E6%8E%A2/" />


    <title>
        
            SSM 边缘试探 :: 777&#39;s blog 
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="https://hishark777.com/main.154a87e0ff720e102948892a8eb80881aa81a4faf37376f3093be219f6296c3d.css">




    <link rel="apple-touch-icon" sizes="180x180" href="https://hishark777.com/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://hishark777.com/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://hishark777.com/favicon-16x16.png">
    <link rel="manifest" href="https://hishark777.com/site.webmanifest">
    <link rel="mask-icon" href="https://hishark777.com/safari-pinned-tab.svg" color="#252627">
    <link rel="shortcut icon" href="https://hishark777.com/favicon.ico">
    <meta name="msapplication-TileColor" content="#252627">
    <meta name="theme-color" content="#252627">



<meta itemprop="name" content="SSM 边缘试探">
<meta itemprop="description" content="SSM真的很好用啊鼓掌！👏">
<meta itemprop="datePublished" content="2018-04-03T20:38:10&#43;00:00" />
<meta itemprop="dateModified" content="2018-04-03T20:38:10&#43;00:00" />
<meta itemprop="wordCount" content="990">
<meta itemprop="image" content="https://hishark777.com"/>



<meta itemprop="keywords" content="SSM," />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://hishark777.com"/>

<meta name="twitter:title" content="SSM 边缘试探"/>
<meta name="twitter:description" content="SSM真的很好用啊鼓掌！👏"/>



    <meta property="og:title" content="SSM 边缘试探" />
<meta property="og:description" content="SSM真的很好用啊鼓掌！👏" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hishark777.com/post/ssm%E8%BE%B9%E7%BC%98%E8%AF%95%E6%8E%A2/" />
<meta property="og:image" content="https://hishark777.com"/>
<meta property="article:published_time" content="2018-04-03T20:38:10+00:00" />
<meta property="article:modified_time" content="2018-04-03T20:38:10+00:00" />




    <meta property="article:section" content="学习笔记" />



    <meta property="article:published_time" content="2018-04-03 20:38:10 &#43;0000 UTC" />








    </head>

    <body class="dark-theme">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="https://hishark777.com/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">$ cd /777/blog</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://hishark777.com/about/">关于</a></li><li><a href="https://hishark777.com/posts/">归档</a></li><li><a href="https://hishark777.com/tags">标签</a></li><li><a href="https://hishark777.com/categories">分类</a></li><li><a href="https://www.douban.com/people/hishark/photos">相册</a></li><li><a href="https://hishark777.gitbook.io/777-interview-notes/">校招笔记</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            
            </p>
        </div>

        <article>
            <h2 class="post-title"><a href="https://hishark777.com/post/ssm%E8%BE%B9%E7%BC%98%E8%AF%95%E6%8E%A2/">SSM 边缘试探</a></h2>

            

            

            <div class="post-content">
                <p>SSM真的很好用啊鼓掌！👏</p>
<h4 id="安装mysql数据库">安装Mysql数据库</h4>
<p>MySQL-Front贼好用b（￣▽￣）d　</p>
<p><img src="https://ws1.sinaimg.cn/large/0068SXX6gy1fq0wqi52jij30m70fjab6.jpg" alt=""></p>
<h4 id="创建动态web工程">创建动态Web工程</h4>
<p>创建一个Dynamic Web Project。</p>
<p><img src="https://ws1.sinaimg.cn/large/0068SXX6gy1fq0wt4rtgcj30i10hit9r.jpg" alt=""></p>
<h4 id="把jar包导入web-inflib">把jar包导入WEB-INF/lib</h4>
<p><img src="https://ws1.sinaimg.cn/large/0068SXX6gy1fq0gm9e2vyj30p805xmxn.jpg" alt=""></p>
<h4 id="创建bean">创建bean</h4>
<p>该bean和数据库中的表产生映射。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> pojo<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Book</span> <span style="color:#f92672">{</span>
	<span style="color:#75715e">// 变量名和MySQL数据库中表的字段需一致
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> BookId<span style="color:#f92672">;</span>
	<span style="color:#66d9ef">private</span> String Isbn<span style="color:#f92672">;</span>
	<span style="color:#66d9ef">private</span> String Title<span style="color:#f92672">;</span>
	<span style="color:#66d9ef">private</span> String Price<span style="color:#f92672">;</span>

	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getBookId</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">return</span> BookId<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setBookId</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> bookId<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		BookId <span style="color:#f92672">=</span> bookId<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getIsbn</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">return</span> Isbn<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setIsbn</span><span style="color:#f92672">(</span>String isbn<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		Isbn <span style="color:#f92672">=</span> isbn<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getTitle</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">return</span> Title<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setTitle</span><span style="color:#f92672">(</span>String title<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		Title <span style="color:#f92672">=</span> title<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getPrice</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">return</span> Price<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setPrice</span><span style="color:#f92672">(</span>String price<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		Price <span style="color:#f92672">=</span> price<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="创建bookmapper">创建BookMapper</h4>
<p>说明对数据库中表的相关操作</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> mapper<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> java.util.List<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> pojo.*<span style="color:#f92672">;</span>

<span style="color:#75715e">//可以提供给用户的服务
</span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">BookMapper</span> <span style="color:#f92672">{</span>
	<span style="color:#75715e">// 得到所有图书
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>Book<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">list</span><span style="color:#f92672">();</span>

	<span style="color:#75715e">// 添加图书
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>Book book<span style="color:#f92672">);</span>

	<span style="color:#75715e">// 删除图书
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">delete</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> bookId<span style="color:#f92672">);</span>

	<span style="color:#75715e">// 得到一本书
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">public</span> Book <span style="color:#a6e22e">get</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> bookId<span style="color:#f92672">);</span>

	<span style="color:#75715e">// 更新图书
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">update</span><span style="color:#f92672">(</span>Book book<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="创建bookxml">创建Book.xml</h4>
<p>Book.xml将bean与数据库中的表建立关联并实现对数据库的相关操作。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#75715e">&lt;!-- 需要这个xml来发生映射 --&gt;</span>
<span style="color:#75715e">&lt;!-- book.xml建立关联并且执行相关操作 --&gt;</span>
<span style="color:#75715e">&lt;!-- 这个相当于之前用到的DbConnection --&gt;</span>
<span style="color:#75715e">&lt;!DOCTYPE mapper
</span><span style="color:#75715e">         PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span><span style="color:#75715e">         &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
<span style="color:#75715e">&lt;!-- 目录一定要指定 --&gt;</span>
<span style="color:#f92672">&lt;mapper</span> <span style="color:#a6e22e">namespace=</span><span style="color:#e6db74">&#34;mapper.BookMapper&#34;</span><span style="color:#f92672">&gt;</span>
	<span style="color:#75715e">&lt;!-- 这里就是所有的映射 1.book和表发生关联 2.book相关操作的sql语句全部在这 --&gt;</span>
	<span style="color:#75715e">&lt;!-- id和BookMapper里的函数名一致 --&gt;</span>
	<span style="color:#75715e">&lt;!-- resulttype为数据的返回类型 --&gt;</span>
    <span style="color:#75715e">&lt;!-- parameterType为输入参数的类型 --&gt;</span>
	<span style="color:#f92672">&lt;select</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;list&#34;</span> <span style="color:#a6e22e">resultType=</span><span style="color:#e6db74">&#34;Book&#34;</span><span style="color:#f92672">&gt;</span>
		select * from book_table
	<span style="color:#f92672">&lt;/select&gt;</span>
    <span style="color:#75715e">&lt;!-- 取值用#{} --&gt;</span>
	<span style="color:#f92672">&lt;insert</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;add&#34;</span> <span style="color:#a6e22e">parameterType=</span><span style="color:#e6db74">&#34;Book&#34;</span><span style="color:#f92672">&gt;</span>
		insert into book_table(Title,Isbn,Price) values(#{Title},#{Isbn},#{Price})
	<span style="color:#f92672">&lt;/insert&gt;</span>
	<span style="color:#f92672">&lt;delete</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;delete&#34;</span> <span style="color:#a6e22e">parameterType=</span><span style="color:#e6db74">&#34;Book&#34;</span><span style="color:#f92672">&gt;</span>
		delete from book_table where BookId = #{BookId}
	<span style="color:#f92672">&lt;/delete&gt;</span>
	<span style="color:#75715e">&lt;!-- int前面要加下划线 --&gt;</span>
	<span style="color:#f92672">&lt;select</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;get&#34;</span> <span style="color:#a6e22e">parameterType=</span><span style="color:#e6db74">&#34;_int&#34;</span> <span style="color:#a6e22e">resultType=</span><span style="color:#e6db74">&#34;Book&#34;</span><span style="color:#f92672">&gt;</span>
		select * from book_table where BookId = #{BookId}
	<span style="color:#f92672">&lt;/select&gt;</span>
	<span style="color:#f92672">&lt;update</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;update&#34;</span> <span style="color:#a6e22e">parameterType=</span><span style="color:#e6db74">&#34;Book&#34;</span><span style="color:#f92672">&gt;</span>
		update book_table set Isbn = #{Isbn},Title = #{Title},Price = #{Price} where BookId = #{BookId}
	<span style="color:#f92672">&lt;/update&gt;</span>
<span style="color:#f92672">&lt;/mapper&gt;</span>
</code></pre></div><h4 id="创建bookservice接口">创建BookService接口</h4>
<p>业务逻辑层，对外提供的功能。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> service<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> java.util.List<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> pojo.Book<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">BookService</span> <span style="color:#f92672">{</span>
	<span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>Book<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">list</span><span style="color:#f92672">();</span>

	<span style="color:#75715e">// 添加图书
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>Book book<span style="color:#f92672">);</span>

	<span style="color:#75715e">// 删除图书
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">delete</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> bookId<span style="color:#f92672">);</span>

	<span style="color:#75715e">// 得到一本书
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">public</span> Book <span style="color:#a6e22e">get</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> bookId<span style="color:#f92672">);</span>

	<span style="color:#75715e">// 更新图书
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">update</span><span style="color:#f92672">(</span>Book book<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="实现bookservice接口">实现BookService接口</h4>
<p>控制器类Controller首先调用这里面的方法，然后这里面的方法又调用BookMapper的方法，最后BookMapper调用Book.xml执行相关SQL操作。</p>
<p>要加上各种注解——Service、Autowired。</p>
<p>注解的好处：比如<code>@Autowired</code>主要声明一个引用变量，不需要实例化，spring框架会帮我们实例化，简化了操作。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> serviceImp<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> java.util.List<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.beans.factory.annotation.Autowired<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.stereotype.Service<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> mapper.BookMapper<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> pojo.Book<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> service.BookService<span style="color:#f92672">;</span>
<span style="color:#75715e">/* Service注解
</span><span style="color:#75715e"> * 告诉spring这是一个实现类（是BookService的实现类）
</span><span style="color:#75715e"> * 所以不需要自己实例化啦
</span><span style="color:#75715e"> */</span>
<span style="color:#a6e22e">@Service</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BookServiceImp</span> <span style="color:#66d9ef">implements</span> BookService <span style="color:#f92672">{</span>
  
	<span style="color:#75715e">/* 只需要定义接口的引用变量
</span><span style="color:#75715e">	 * spring利用注解进行注入
</span><span style="color:#75715e">	 * spring框架可实现自动实例化
</span><span style="color:#75715e">	 */</span>
	<span style="color:#a6e22e">@Autowired</span>
	BookMapper bookMapper<span style="color:#f92672">;</span>
	
	<span style="color:#a6e22e">@Override</span>
	<span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>Book<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">list</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
		<span style="color:#75715e">// TODO Auto-generated method stub
</span><span style="color:#75715e"></span>		<span style="color:#66d9ef">return</span> bookMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">list</span><span style="color:#f92672">();</span>
	<span style="color:#f92672">}</span>

	<span style="color:#a6e22e">@Override</span>
	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>Book book<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		<span style="color:#75715e">// TODO Auto-generated method stub
</span><span style="color:#75715e"></span>		bookMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>book<span style="color:#f92672">);</span>
	<span style="color:#f92672">}</span>

	<span style="color:#a6e22e">@Override</span>
	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">delete</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> bookId<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		<span style="color:#75715e">// TODO Auto-generated method stub
</span><span style="color:#75715e"></span>		bookMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">delete</span><span style="color:#f92672">(</span>bookId<span style="color:#f92672">);</span>
	<span style="color:#f92672">}</span>

	<span style="color:#a6e22e">@Override</span>
	<span style="color:#66d9ef">public</span> Book <span style="color:#a6e22e">get</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> bookId<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		<span style="color:#75715e">// TODO Auto-generated method stub
</span><span style="color:#75715e"></span>		<span style="color:#66d9ef">return</span> bookMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>bookId<span style="color:#f92672">);</span>
	<span style="color:#f92672">}</span>

	<span style="color:#a6e22e">@Override</span>
	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">update</span><span style="color:#f92672">(</span>Book book<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		<span style="color:#75715e">// TODO Auto-generated method stub
</span><span style="color:#75715e"></span>		bookMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">update</span><span style="color:#f92672">(</span>book<span style="color:#f92672">);</span>
	<span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="创建控制器类">创建控制器类</h4>
<p>Controller通过<code>@RequestMapping(&quot;&quot;)</code>内的操作名接收用户请求。</p>
<p>JSP页面通过操作名调用相关操作，Controller首先调用BookService里的方法，然后BookService里的方法又调用BookMapper的方法，最后BookMapper调用Book.xml执行相关SQL操作。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> controller<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> java.util.List<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.beans.factory.annotation.Autowired<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.stereotype.Controller<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.web.bind.annotation.RequestMapping<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.web.servlet.ModelAndView<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> pojo.*<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> service.BookService<span style="color:#f92672">;</span>

<span style="color:#a6e22e">@Controller</span><span style="color:#75715e">//告诉spring mvc这是一个控制器类
</span><span style="color:#75715e"></span><span style="color:#a6e22e">@RequestMapping</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">)</span><span style="color:#75715e">//接收用户的请求
</span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BookController</span> <span style="color:#f92672">{</span>
	<span style="color:#75715e">//不需要new！spring自动实例化。记得加上注解
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">@Autowired</span>
	BookService bookService<span style="color:#f92672">;</span>

	<span style="color:#75715e">//JSP页面就是通过listBook进行相应的方法调用，这个就相当于structx.xml的action的名字，是一个对外的操作名。
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">@RequestMapping</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;listBook&#34;</span><span style="color:#f92672">)</span>
	<span style="color:#66d9ef">public</span> ModelAndView <span style="color:#a6e22e">listBook</span><span style="color:#f92672">(){</span>
		ModelAndView mv <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ModelAndView<span style="color:#f92672">();</span>
		List<span style="color:#f92672">&lt;</span>Book<span style="color:#f92672">&gt;</span> cs <span style="color:#f92672">=</span> bookService<span style="color:#f92672">.</span><span style="color:#a6e22e">list</span><span style="color:#f92672">();</span>
		<span style="color:#75715e">//把cs带到页面上去
</span><span style="color:#75715e"></span>		<span style="color:#75715e">//mv存放转发的参数（要转发到JSP的数据）
</span><span style="color:#75715e"></span>		mv<span style="color:#f92672">.</span><span style="color:#a6e22e">addObject</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;cs&#34;</span><span style="color:#f92672">,</span>cs<span style="color:#f92672">);</span>
		<span style="color:#75715e">//放入将要跳转到的JSP文件名，不需要后缀名，配置文件中再进行配置
</span><span style="color:#75715e"></span>		mv<span style="color:#f92672">.</span><span style="color:#a6e22e">setViewName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;BookList&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#75715e">//return给springMVC框架 然后就会自动匹配跳转页面
</span><span style="color:#75715e"></span>		<span style="color:#66d9ef">return</span> mv<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>
  
	<span style="color:#a6e22e">@RequestMapping</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;addBook&#34;</span><span style="color:#f92672">)</span>
	<span style="color:#66d9ef">public</span> ModelAndView <span style="color:#a6e22e">addBook</span><span style="color:#f92672">(</span>Book book<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		ModelAndView mv <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ModelAndView<span style="color:#f92672">();</span>
		bookService<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>book<span style="color:#f92672">);</span>
		List<span style="color:#f92672">&lt;</span>Book<span style="color:#f92672">&gt;</span> cs <span style="color:#f92672">=</span> bookService<span style="color:#f92672">.</span><span style="color:#a6e22e">list</span><span style="color:#f92672">();</span>
		mv<span style="color:#f92672">.</span><span style="color:#a6e22e">addObject</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;cs&#34;</span><span style="color:#f92672">,</span>cs<span style="color:#f92672">);</span>
		mv<span style="color:#f92672">.</span><span style="color:#a6e22e">setViewName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;BookList&#34;</span><span style="color:#f92672">);</span>
	    <span style="color:#66d9ef">return</span> mv<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>
	
	<span style="color:#a6e22e">@RequestMapping</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;deleteBook&#34;</span><span style="color:#f92672">)</span> 
	<span style="color:#66d9ef">public</span> ModelAndView <span style="color:#a6e22e">deleteBook</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> bookId<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		ModelAndView mv <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ModelAndView<span style="color:#f92672">();</span>
		bookService<span style="color:#f92672">.</span><span style="color:#a6e22e">delete</span><span style="color:#f92672">(</span>bookId<span style="color:#f92672">);</span>
		List<span style="color:#f92672">&lt;</span>Book<span style="color:#f92672">&gt;</span> cs <span style="color:#f92672">=</span> bookService<span style="color:#f92672">.</span><span style="color:#a6e22e">list</span><span style="color:#f92672">();</span>
		mv<span style="color:#f92672">.</span><span style="color:#a6e22e">addObject</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;cs&#34;</span><span style="color:#f92672">,</span>cs<span style="color:#f92672">);</span>
		mv<span style="color:#f92672">.</span><span style="color:#a6e22e">setViewName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;BookList&#34;</span><span style="color:#f92672">);</span>
		<span style="color:#66d9ef">return</span> mv<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>
	
  	<span style="color:#75715e">//编辑图书前要先加载图书信息
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">@RequestMapping</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;loadBook&#34;</span><span style="color:#f92672">)</span> 
	<span style="color:#66d9ef">public</span> ModelAndView <span style="color:#a6e22e">loadBook</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> bookId<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		ModelAndView mv <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ModelAndView<span style="color:#f92672">();</span>
		Book book <span style="color:#f92672">=</span> bookService<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>bookId<span style="color:#f92672">);</span>
		mv<span style="color:#f92672">.</span><span style="color:#a6e22e">addObject</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;book&#34;</span><span style="color:#f92672">,</span>book<span style="color:#f92672">);</span>
		mv<span style="color:#f92672">.</span><span style="color:#a6e22e">setViewName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;BookEdit&#34;</span><span style="color:#f92672">);</span>
		<span style="color:#66d9ef">return</span> mv<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>
	
	<span style="color:#a6e22e">@RequestMapping</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;editBook&#34;</span><span style="color:#f92672">)</span> 
	<span style="color:#66d9ef">public</span> ModelAndView <span style="color:#a6e22e">editBook</span><span style="color:#f92672">(</span>Book book<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		ModelAndView mv <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ModelAndView<span style="color:#f92672">();</span>
		bookService<span style="color:#f92672">.</span><span style="color:#a6e22e">update</span><span style="color:#f92672">(</span>book<span style="color:#f92672">);</span>
		List<span style="color:#f92672">&lt;</span>Book<span style="color:#f92672">&gt;</span> cs <span style="color:#f92672">=</span> bookService<span style="color:#f92672">.</span><span style="color:#a6e22e">list</span><span style="color:#f92672">();</span>
		mv<span style="color:#f92672">.</span><span style="color:#a6e22e">addObject</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;cs&#34;</span><span style="color:#f92672">,</span>cs<span style="color:#f92672">);</span>
		mv<span style="color:#f92672">.</span><span style="color:#a6e22e">setViewName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;BookList&#34;</span><span style="color:#f92672">);</span>
		<span style="color:#66d9ef">return</span> mv<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="编写配置文件">编写配置文件</h4>
<h5 id="applicationcontextxml">applicationContext.xml</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#f92672">&lt;beans</span> <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/beans&#34;</span>
	<span style="color:#a6e22e">xmlns:xsi=</span><span style="color:#e6db74">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span> 
	<span style="color:#a6e22e">xmlns:aop=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/aop&#34;</span>
	<span style="color:#a6e22e">xmlns:tx=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/tx&#34;</span> 
	<span style="color:#a6e22e">xmlns:jdbc=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/jdbc&#34;</span>
	<span style="color:#a6e22e">xmlns:context=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/context&#34;</span>
	<span style="color:#a6e22e">xmlns:mvc=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/mvc&#34;</span>
	<span style="color:#a6e22e">xsi:schemaLocation=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/context
</span><span style="color:#e6db74">    http://www.springframework.org/schema/context/spring-context-3.0.xsd 
</span><span style="color:#e6db74">    http://www.springframework.org/schema/beans 
</span><span style="color:#e6db74">    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
</span><span style="color:#e6db74">    http://www.springframework.org/schema/jdbc 
</span><span style="color:#e6db74">    http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd 
</span><span style="color:#e6db74">    http://www.springframework.org/schema/tx 
</span><span style="color:#e6db74">    http://www.springframework.org/schema/tx/spring-tx-3.0.xsd 
</span><span style="color:#e6db74">    http://www.springframework.org/schema/aop 
</span><span style="color:#e6db74">    http://www.springframework.org/schema/aop/spring-aop-3.0.xsd 
</span><span style="color:#e6db74">    http://www.springframework.org/schema/mvc 
</span><span style="color:#e6db74">    http://www.springframework.org/schema/mvc/spring-mvc.xsd &#34;</span><span style="color:#f92672">&gt;</span>
	<span style="color:#75715e">&lt;!-- 1.通过注解，将service的生命周期纳入spring框架进行管理 --&gt;</span>
	<span style="color:#f92672">&lt;context:annotation-config</span> <span style="color:#f92672">/&gt;</span>
	<span style="color:#f92672">&lt;context:component-scan</span> <span style="color:#a6e22e">base-package=</span><span style="color:#e6db74">&#34;service&#34;</span> <span style="color:#f92672">/&gt;</span>
	<span style="color:#f92672">&lt;context:component-scan</span> <span style="color:#a6e22e">base-package=</span><span style="color:#e6db74">&#34;serviceImp&#34;</span> <span style="color:#f92672">/&gt;</span>
	<span style="color:#75715e">&lt;!-- 2.配置数据源 --&gt;</span>
	<span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;dataSource&#34;</span>
		<span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;org.springframework.jdbc.datasource.DriverManagerDataSource&#34;</span><span style="color:#f92672">&gt;</span>
		<span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;driverClassName&#34;</span><span style="color:#f92672">&gt;</span>
			<span style="color:#f92672">&lt;value&gt;</span>com.mysql.jdbc.Driver<span style="color:#f92672">&lt;/value&gt;</span>
		<span style="color:#f92672">&lt;/property&gt;</span>
		<span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;url&#34;</span><span style="color:#f92672">&gt;</span>
			<span style="color:#f92672">&lt;value&gt;</span>jdbc:mysql://localhost:3306/777-ssm?characterEncoding=UTF-8
			<span style="color:#f92672">&lt;/value&gt;</span>
		<span style="color:#f92672">&lt;/property&gt;</span>
		<span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;username&#34;</span><span style="color:#f92672">&gt;</span>
			<span style="color:#f92672">&lt;value&gt;</span>root<span style="color:#f92672">&lt;/value&gt;</span>
		<span style="color:#f92672">&lt;/property&gt;</span>
		<span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;password&#34;</span><span style="color:#f92672">&gt;</span>
			<span style="color:#f92672">&lt;value&gt;</span>123456<span style="color:#f92672">&lt;/value&gt;</span>
		<span style="color:#f92672">&lt;/property&gt;</span>
	<span style="color:#f92672">&lt;/bean&gt;</span>
	<span style="color:#75715e">&lt;!-- 3.扫描存放sql语句的Book.xml --&gt;</span>
	<span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;sqlSession&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;org.mybatis.spring.SqlSessionFactoryBean&#34;</span><span style="color:#f92672">&gt;</span>
		<span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;typeAliasesPackage&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;pojo&#34;</span> <span style="color:#f92672">/&gt;</span>
		<span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;dataSource&#34;</span> <span style="color:#a6e22e">ref=</span><span style="color:#e6db74">&#34;dataSource&#34;</span> <span style="color:#f92672">/&gt;</span>
		<span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;mapperLocations&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;classpath:mapper/*.xml&#34;</span> <span style="color:#f92672">/&gt;</span>
	<span style="color:#f92672">&lt;/bean&gt;</span>
	<span style="color:#75715e">&lt;!-- 4.扫描Mapper,并将其生命周期纳入spring管理 --&gt;</span>
	<span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;org.mybatis.spring.mapper.MapperScannerConfigurer&#34;</span><span style="color:#f92672">&gt;</span>
		<span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;basePackage&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;mapper&#34;</span> <span style="color:#f92672">/&gt;</span>
	<span style="color:#f92672">&lt;/bean&gt;</span>
<span style="color:#f92672">&lt;/beans&gt;</span>
</code></pre></div><h5 id="springmvcxml">springMVC.xml</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#f92672">&lt;beans</span> <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/beans&#34;</span>
	<span style="color:#a6e22e">xmlns:xsi=</span><span style="color:#e6db74">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span> <span style="color:#a6e22e">xmlns:aop=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/aop&#34;</span>
	<span style="color:#a6e22e">xmlns:tx=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/tx&#34;</span> <span style="color:#a6e22e">xmlns:jdbc=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/jdbc&#34;</span>
	<span style="color:#a6e22e">xmlns:context=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/context&#34;</span>
	<span style="color:#a6e22e">xmlns:mvc=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/mvc&#34;</span>
	<span style="color:#a6e22e">xsi:schemaLocation=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/jdbc
</span><span style="color:#e6db74">	 http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd 
</span><span style="color:#e6db74">	        http://www.springframework.org/schema/aop 
</span><span style="color:#e6db74">	 http://www.springframework.org/schema/aop/spring-aop-3.0.xsd 
</span><span style="color:#e6db74">	        http://www.springframework.org/schema/beans 
</span><span style="color:#e6db74">	 http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
</span><span style="color:#e6db74">	        http://www.springframework.org/schema/context 
</span><span style="color:#e6db74">	 http://www.springframework.org/schema/context/spring-context-3.0.xsd 
</span><span style="color:#e6db74">	        http://www.springframework.org/schema/tx 
</span><span style="color:#e6db74">	 http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
</span><span style="color:#e6db74">	        http://www.springframework.org/schema/mvc 
</span><span style="color:#e6db74">	 http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd &#34;</span><span style="color:#f92672">&gt;</span>
	<span style="color:#75715e">&lt;!-- 1.扫描Controller,并将其生命周期纳入spring管理 --&gt;</span>
	<span style="color:#f92672">&lt;context:annotation-config</span> <span style="color:#f92672">/&gt;</span>
	<span style="color:#f92672">&lt;context:component-scan</span> <span style="color:#a6e22e">base-package=</span><span style="color:#e6db74">&#34;controller&#34;</span><span style="color:#f92672">&gt;</span>
		<span style="color:#f92672">&lt;context:include-filter</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;annotation&#34;</span>
			<span style="color:#a6e22e">expression=</span><span style="color:#e6db74">&#34;org.springframework.stereotype.Controller&#34;</span> <span style="color:#f92672">/&gt;</span>
	<span style="color:#f92672">&lt;/context:component-scan&gt;</span>
	<span style="color:#75715e">&lt;!-- 2.注解驱动，使得访问路径和方法的匹配可以通过注解进行配置 --&gt;</span>
	<span style="color:#f92672">&lt;mvc:annotation-driven</span> <span style="color:#f92672">/&gt;</span>
	<span style="color:#75715e">&lt;!-- 3.静态页面跳转 --&gt;</span>
	<span style="color:#f92672">&lt;mvc:default-servlet-handler</span> <span style="color:#f92672">/&gt;</span>
	<span style="color:#75715e">&lt;!-- 视图定位/webContent/curd --&gt;</span>
	<span style="color:#f92672">&lt;bean</span>
		<span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;org.springframework.web.servlet.view.InternalResourceViewResolver&#34;</span><span style="color:#f92672">&gt;</span>
		<span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;viewClass&#34;</span>
			<span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;org.springframework.web.servlet.view.JstlView&#34;</span> <span style="color:#f92672">/&gt;</span>
		<span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;prefix&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;/curd/&#34;</span> <span style="color:#f92672">/&gt;</span>
		<span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;suffix&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;.jsp&#34;</span> <span style="color:#f92672">/&gt;</span>
	<span style="color:#f92672">&lt;/bean&gt;</span>
<span style="color:#f92672">&lt;/beans&gt;</span>
</code></pre></div><h5 id="webxml">web.xml</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#f92672">&lt;web-app</span> <span style="color:#a6e22e">xmlns:xsi=</span><span style="color:#e6db74">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
		 <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://java.sun.com/xml/ns/javaee&#34;</span>
		 <span style="color:#a6e22e">xsi:schemaLocation=</span><span style="color:#e6db74">&#34;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&#34;</span>
		 <span style="color:#a6e22e">version=</span><span style="color:#e6db74">&#34;3.0&#34;</span><span style="color:#f92672">&gt;</span>
	<span style="color:#75715e">&lt;!-- spring的配置文件 --&gt;</span>
	<span style="color:#f92672">&lt;context-param&gt;</span><span style="color:#75715e">&lt;!--全局范围内环境参数初始化 --&gt;</span>
		<span style="color:#f92672">&lt;param-name&gt;</span>contextConfigLocation<span style="color:#f92672">&lt;/param-name&gt;</span><span style="color:#75715e">&lt;!--参数名称 --&gt;</span>
		<span style="color:#f92672">&lt;param-value&gt;</span>classpath:applicationContext.xml<span style="color:#f92672">&lt;/param-value&gt;</span><span style="color:#75715e">&lt;!--参数取值 --&gt;</span>
	<span style="color:#f92672">&lt;/context-param&gt;</span>
	<span style="color:#f92672">&lt;listener&gt;</span>
		<span style="color:#f92672">&lt;listener-class&gt;</span>org.springframework.web.context.ContextLoaderListener<span style="color:#f92672">&lt;/listener-class&gt;</span>
	<span style="color:#f92672">&lt;/listener&gt;</span>
	<span style="color:#75715e">&lt;!-- spring mvc核心：分发servlet --&gt;</span>
	<span style="color:#f92672">&lt;servlet&gt;</span>
		<span style="color:#f92672">&lt;servlet-name&gt;</span>mvc-dispatcher<span style="color:#f92672">&lt;/servlet-name&gt;</span>
		<span style="color:#f92672">&lt;servlet-class&gt;</span>org.springframework.web.servlet.DispatcherServlet<span style="color:#f92672">&lt;/servlet-class&gt;</span>
		<span style="color:#75715e">&lt;!-- spring mvc的配置文件 --&gt;</span>
		<span style="color:#f92672">&lt;init-param&gt;</span>
			<span style="color:#f92672">&lt;param-name&gt;</span>contextConfigLocation<span style="color:#f92672">&lt;/param-name&gt;</span>
			<span style="color:#f92672">&lt;param-value&gt;</span>classpath:springMVC.xml<span style="color:#f92672">&lt;/param-value&gt;</span>
		<span style="color:#f92672">&lt;/init-param&gt;</span>
		<span style="color:#f92672">&lt;load-on-startup&gt;</span>1<span style="color:#f92672">&lt;/load-on-startup&gt;</span>
	<span style="color:#f92672">&lt;/servlet&gt;</span>
	<span style="color:#f92672">&lt;servlet-mapping&gt;</span>
		<span style="color:#f92672">&lt;servlet-name&gt;</span>mvc-dispatcher<span style="color:#f92672">&lt;/servlet-name&gt;</span>
		<span style="color:#f92672">&lt;url-pattern&gt;</span>/<span style="color:#f92672">&lt;/url-pattern&gt;</span>
	<span style="color:#f92672">&lt;/servlet-mapping&gt;</span>
	<span style="color:#75715e">&lt;!-- 配置过滤器解决中文乱码问题 --&gt;</span>
	<span style="color:#f92672">&lt;filter&gt;</span>
		<span style="color:#f92672">&lt;filter-name&gt;</span>CharacterEncoding<span style="color:#f92672">&lt;/filter-name&gt;</span>
		<span style="color:#f92672">&lt;filter-class&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span style="color:#f92672">&lt;/filter-class&gt;</span>
		<span style="color:#f92672">&lt;init-param&gt;</span>
			<span style="color:#f92672">&lt;param-name&gt;</span>encoding<span style="color:#f92672">&lt;/param-name&gt;</span>
			<span style="color:#f92672">&lt;param-value&gt;</span>UTF-8<span style="color:#f92672">&lt;/param-value&gt;</span>
		<span style="color:#f92672">&lt;/init-param&gt;</span>
	<span style="color:#f92672">&lt;/filter&gt;</span>
	<span style="color:#f92672">&lt;filter-mapping&gt;</span>
		<span style="color:#f92672">&lt;filter-name&gt;</span>CharacterEncoding<span style="color:#f92672">&lt;/filter-name&gt;</span>
		<span style="color:#f92672">&lt;url-pattern&gt;</span>/*<span style="color:#f92672">&lt;/url-pattern&gt;</span>
	<span style="color:#f92672">&lt;/filter-mapping&gt;</span>
<span style="color:#f92672">&lt;/web-app&gt;</span>
</code></pre></div><h4 id="view层">View层</h4>
<h5 id="booklistjsp">BookList.jsp</h5>
<pre><code class="language-jsp" data-lang="jsp">&lt;%@ page language=&quot;java&quot; pageEncoding=&quot;utf-8&quot;%&gt;
&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot;%&gt;
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;图书列表&lt;/title&gt;
&lt;style type=&quot;text/css&quot;&gt;
table {
	border: 1px solid black;
	border-collapse: collapse;
}
table thead tr th {
	border: 1px solid black;
	padding: 3px;
	background-color: #cccccc;
}
table tbody tr td {
	border: 1px solid black;
	padding: 3px;
}
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;div align=&quot;center&quot;&gt;
		&lt;h4&gt;图书列表&lt;/h4&gt;
		&lt;table cellspacing=&quot;0&quot;&gt;
			&lt;thead&gt;
				&lt;tr&gt;
					&lt;th&gt;Select&lt;/th&gt;
					&lt;th&gt;ISBN&lt;/th&gt;
					&lt;th&gt;Title&lt;/th&gt;
					&lt;th&gt;Price&lt;/th&gt;
					&lt;th&gt;Operation&lt;/th&gt;
				&lt;/tr&gt;
			&lt;/thead&gt;
			&lt;tbody&gt;
				&lt;!-- items从Controller的mv传出的cs取值  起个别名为c--&gt;
				&lt;c:forEach items=&quot;${cs}&quot; var=&quot;c&quot; varStatus=&quot;st&quot;&gt;
					&lt;tr&gt;
						&lt;td&gt;&lt;/td&gt;
						&lt;!-- 取值用${} --&gt;
						&lt;td&gt;${c.isbn}&lt;/td&gt;
						&lt;td&gt;${c.title}&lt;/td&gt;
						&lt;td&gt;${c.price}&lt;/td&gt;
						&lt;td&gt;
						&lt;!-- loadBook和deleteBook都是Controller里设置的请求名 ?带参数 --&gt;
						&lt;a href='loadBook?bookId=${c.bookId}'&gt;Edit&lt;/a&gt; 
						&lt;a href='deleteBook?bookId=${c.bookId}'&gt;Delete&lt;/a&gt;
						&lt;/td&gt;
					&lt;/tr&gt;
				&lt;/c:forEach&gt;
			&lt;/tbody&gt;
		&lt;/table&gt;
		&lt;a href=&quot;/777-SSMBook/curd/BookAdd.jsp&quot;&gt;addBook&lt;/a&gt;
	&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><h5 id="bookaddjsp">BookAdd.jsp</h5>
<pre><code class="language-jsp" data-lang="jsp">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;utf-8&quot;%&gt;
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;增加图书&lt;/title&gt;
&lt;/head&gt;
&lt;body onload=&quot;&quot;&gt;
	&lt;div align=&quot;center&quot;&gt;
		&lt;!-- 指定提交表单时调用addBook执行添加操作 --&gt;
		&lt;form action=&quot;/777-SSMBook/addBook&quot; method=&quot;post&quot;&gt;
			&lt;!-- name这里首字母大小写都可以欸 迷 --&gt;
			Isbn:&lt;input type=&quot;text&quot; name=&quot;isbn&quot;&gt;
			Title:&lt;input type=&quot;text&quot; name=&quot;title&quot;&gt;
			Price:&lt;input type=&quot;text&quot; name=&quot;price&quot;&gt;
			&lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;
		&lt;/form&gt;
		&lt;!-- 返回就调用listBook显示所有图书啦 --&gt;
		&lt;a href='https://hishark777.com/777-SSMBook/listBook'&gt;返回 &lt;/a&gt;
	&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><h5 id="bookeditjsp">BookEdit.jsp</h5>
<pre><code class="language-jsp" data-lang="jsp">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;utf-8&quot;%&gt;
&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;编辑图书&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;div align=&quot;center&quot;&gt;
		&lt;form action=&quot;/777-SSMBook/editBook&quot; method=&quot;post&quot;&gt;
			&lt;!-- value里的book是控制器里的ModelAndView的key值！！——mv.addObject(&quot;book&quot;,book); --&gt;
			&lt;input type=&quot;hidden&quot; name=&quot;bookId&quot; value=&quot;${book.bookId}&quot;&gt;
			Isbn:&lt;input type=&quot;text&quot; name=&quot;isbn&quot; value=&quot;${book.isbn}&quot;&gt;
			Title:&lt;input type=&quot;text&quot; name=&quot;title&quot; value=&quot;${book.title}&quot;&gt;
			&lt;!-- value取值用book.price和 &lt;c:catch&gt;${book.price}&lt;/c:catch&gt;都可以--&gt;
			Price:&lt;input type=&quot;text&quot; name=&quot;price&quot; value='&lt;c:catch&gt;${book.price}&lt;/c:catch&gt;'&gt;
			&lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;
		&lt;/form&gt;
		&lt;a href='https://hishark777.com/777-SSMBook/listBook'&gt;返回 &lt;/a&gt;
	&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><hr>
<h4 id="杂">杂</h4>
<h5 id="踩坑记录">踩坑记录</h5>
<ol>
<li>bean里面的字段，如果首字母是大写，在JSP中引用的时候首字母一定要改成小写，不然gg。如果字段为BookId，引用的时候一定要写bookId，写bookid也会报错啦，只有首字母需要小写。</li>
<li>表单提交中文乱码<a href="https://blog.csdn.net/u013009808/article/details/48325243">解决方案</a>，然后再在JSP加上<code>&lt;%@ page language=&quot;java&quot; pageEncoding=&quot;utf-8&quot;%&gt;</code>即可。</li>
<li><code>Dynamic web module version 3.0</code> 版本需要匹配，<a href="https://www.cnblogs.com/2016-10-07/p/7297826.html">版本修改方法</a> 。</li>
<li>找了好久的bug，包名<code>service.Imp</code>被我写成了<code>serviceImp</code>。写成后者其实也没猫饼，但是没有在<code>applicationContext.xml</code>里面把<code>serviceImp</code>包纳入spring框架进行管理所以出错啦。如果只注解<code>service</code>包的话包名一定要有层级关系啦，如果两个包都注解了就无所谓了OTZ。</li>
<li>xml取值用#{}，jsp取值用${}。</li>
</ol>
<h5 id="unsolved">Unsolved</h5>
<ol>
<li>由于在控制器类里的添加图书操作中设置了将要跳转的JSP页面<code>mav.setViewName(&quot;BookList&quot;)</code>,所以在添加图书后自动跳转到BookList.jsp页面，但是问题出现了，此时浏览器的地址还处在addBook状态，所以如果刷新浏览器就会重复添加图书。</li>
<li>编辑图书出现的问题同上。</li>
<li>form表单的name属性添添说是一定要和bean里的变量名统一，但是我bean里是Isbn，name用isbn也没问题啦。反正以后都小写就好了OTZ</li>
</ol>
            </div>
        </article>

        <hr />

        <div class="post-info">
            
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="https://hishark777.com/tags/ssm/">SSM</a></span>
        
    </p>

            
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-folder meta-icon"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>

        <span class="tag"><a href="https://hishark777.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></span>
        
    </p>

  		</div>
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2017 - 2021</span>
            
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            
            
          </div>
    </div>
</footer>

            
        </div>

        




<script type="text/javascript" src="https://hishark777.com/bundle.min.dc716e9092c9820b77f96da294d0120aeeb189b5bcea9752309ebea27fd53bbe6b13cffb2aca8ecf32525647ceb7001f76091de4199ac5a3caa432c070247f5b.js" integrity="sha512-3HFukJLJggt3&#43;W2ilNASCu6xibW86pdSMJ6&#43;on/VO75rE8/7KsqOzzJSVkfOtwAfdgkd5BmaxaPKpDLAcCR/Ww=="></script>



    </body>
</html>
